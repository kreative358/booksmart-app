{% load bootstrap4 %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<style type="text/css">

#container_sort {
  position: relative;
  width: 560px; 
  margin: 60px auto 0px auto;
  max-width: 560px;
  min-width: 560px;
  z-index: 2;
  left: 2px;
  -webkit-backdrop-filter: blur(2px);
  backdrop-filter: blur(2px);
  background-color: rgba(100, 160, 220, 0.2);
  padding: 10px;
  transition: 0.2s;
  border-radius: 4px;
  border: 6px solid rgba(100, 160, 220, 0.4);
  box-shadow: 
  0px 2px 2px 0px rgba(110, 170, 230, 0.4), 
  0px 3px 3px 0px rgba(100, 160, 220, 0.6), 
  0px 5px 4px 0px rgba(90, 150, 210, 0.4), 
  0px 6px 5px 0px rgba(80, 140, 200, 0.6), 
  -2px 8px 6px 0px rgba(119, 120, 123, 0.4), 
  2px 9px 7px 0px rgba(119, 120, 123, 0.4), 
  0px 10px 8px 0px rgba(77, 77, 79, 0.4), 
  0px 11px 9px 0px rgba(43, 53, 63, 0.6);

  }

#container_sort:hover {
    scale:1.01;
    backdrop-filter: none;
    background-color: rgb(100, 160, 220,); 
    background-color: rgba(100, 160, 220, 0.6); 
    box-shadow: 
    1px 2px 2px 0px rgba(110, 170, 230, 0.4), 
    -1px 3px 3px 0px rgba(100, 160, 220, 0.6), 
    0px 5px 4px 0px rgba(90, 150, 210, 0.4), 
    0px 6px 5px 0px rgba(80, 140, 200, 0.6), 
    0px 2px 5px 9px rgba(229, 230, 243, 0.4);
}

#card_sort {
  background-color: rgb(100, 160, 220,); 
  background-color: rgba(100, 160, 220, 0.4); 
  font-size: 18px;
  color: white;
  font-weight: bold;
  padding: 10px 60px 6px 60px;
  text-align: center;
  transition: 0.2s;
  justify-content:center;
  margin:auto;
  position:relative;
  z-index:2;
  height:146px;
  }
  
#card_sort:hover {
  background-color: rgb(100, 160, 220,); 
  background-color: rgba(100, 160, 220, 0.6); 
}  

#sort_back1 {
  background: rgba(100, 160, 240, 0.0); 
  width: 570px; 
  height:160px; 
  z-index:1;
  position:absolute;
  left:-25px; 
  top:-5px;
  border-radius:4px; 
}

.sortback1 {
/*rgba(100, 160, 220, 0.4)*/
  box-shadow: 0px 0px 2px 6px rgba(60, 160, 240, 0.0);
  cursor:pointer;
} 

#bs_input_sort {
  display:none;
  background-color: rgba(220, 230, 240, 0.0);
  border-radius: 2px;
  padding:5px auto auto auto;
  left:50%;
  width:420px;
  margin:2px auto 5px -210px;
  box-shadow: 0px 0px 4px 4px rgba(100, 160, 220, 0.0);  
  font-size: 22px;
  font-weight: bold;
  overflow:hidden;
  color: blue;
  /*margin:10px 20px 0px 20px;
  width:90%;
  padding:auto;
  justify-content:center;
  padding:4px auto auto auto;
  name select=sorting !!!
  */
  text-align:center;
  border:none;
  outline:none;
  position:fixed;
  z-index:2;
}

#bs_input_sort:hover {
  border:none;
  outline:none;
}

#bs_input_sort:active {
  border:none;
  outline:none;
}

#bs_input_sort:focus {
  border:none;
  outline:none;
}

#div_btn {
  width: 146px;
  height: 60px; 
  background:rgba(60, 160, 240, 0.0);
  left:50%;
  margin-top: 10px;
  margin-left: -73px; 
  z-index:1; 
  position: relative; 
}

.btn.btn_sort:hover {
box-shadow: 0px 0px 2px 6px rgba(220, 230, 240, 0.6);
}

#span1 {
background-color: rgba(240, 230, 220, 0.0);
}
  
#span2a {
float:left;
margin-left:10px;
margin-top: 3px;
}
  
#span2b {
  float:right;
  margin-right: 10px;
  margin-top: 3px;
}
  
.span2 {
  color:rgba(0, 102, 255, 0.2);
  text-shadow: 
  -1px 0 rgba(0, 102, 255, 0.8),
  1px 1px rgba(255, 255, 255, 0.9),
  -1px -1px rgba(255, 255, 255, 0.9),
  -1px 1px rgba(255, 255, 255, 0.9),
  
  2px 1px 1px rgba(0, 102, 255, 0.9),
  0px -1px 1px rgba(0, 102, 255, 0.9);
}
  
.span20 {
  rotate:180deg;
  transition-duration: 0.4s forwords;
  /*animation:mymove 0.2s;*/
  /*transform: rotate(180deg);*/
}
  
@keyframes btnmove {
    from {margin-top:50px;}
    to {margin-top:200px;}
}

.btn_margin {
  transition-duration: 1s;
  /*animation:btnmove 1s ;*/
  margin-top:200px;
}
  /*.span3 {
  /*transform: rotate(-180deg);
  transition: 0.2s;
  animation:mymove 0.2s;
  }
  
  @keyframes mymove {
    from {rotate:180deg;}
    to {rotate:0deg;}
  }*/
  
  
#button {
  box-shadow: 0px 0px 4px 4px rgba(0, 102, 255, 0.6);
  background-color: rgba(230, 230, 240, 0.4);
  outline:none;
  z-index:3;
  position:relative;
  border-radius: 2px;
  /*right:26px; */
  width:100%;
  margin: 10px auto 10px auto;
  color:blue;
  height: 38px;
  font-size: 22px;
  transition:0.2s;
  text-align:center;
  cursor:pointer;
  font-variant: small-caps;
  /*left:50%;
  margin: -70px auto auto -200px;*/
}
  
#button:hover {
  box-shadow: 0px 0px 4px 6px rgba(0, 102, 255, 0.6);
  background-color: rgba(230, 230, 240, 0.6);
}
  
#span1:focus {
  font-weight:bold;
}
  
#button:active {
  box-shadow: 0px 0px 2px 4px rgba(0, 102, 255, 0.8);
  background-color: rgba(230, 230, 240, 0.8);
  transform: translateY(2px);
  scale: 0.98;
}
  
  /*#sortlist {
  overflow:hidden;
  background-color: rgba(240, 230, 220, 0.0);
  color: blue;
  border-radius: 4px;
  z-index:3;
  position:relaative;
  border:none;
  outline:none;
  margin-top: 10px;
  width:400px;
  }
  
  .custom-select {
  box-shadow: 0px 0px 4px 4px rgba(100, 160, 220, 0.6); 
  border-radius: 4px;
  border:none;
  outline:none;⇓⇑⇧⇩√▲▼➤➪
  }*/
  
  /*#select {
  display:none;
  outline:none;
  background-color: rgba(240, 230, 220, 0.0);
  width:400px;
  
  left: 50%;
  z-index:3;
  top:40px;
  margin:auto auto auto -200px;
  position:fixed;
  }*/
  
.opacity {
  opacity:0;
  transition-duration: 0.5s;
}

option {
  display:block;
  text-align:center;
  border-radius: 4px;
  position:relative;
  z-index:3;
  color:blue;
  border:none;
  outline:none;
  background-color: rgba(230, 230, 240, 0.8);
  box-shadow: 0px 0px 2px 4px rgba(100, 160, 220, 0.6); 
  padding:2px 4px 2px 8px;
  font-size:20px;
  font-weight:bold;
  width: 400px;
  margin:6px auto 6px auto;
  /*left:50%;
  margin: -3px auto 14px -190px;*/
  padding-bottom: 6px;
  transition: 0.1s;
  cursor:pointer;
  font-variant: small-caps;
}
  
#sortlist:active {
  border:none;
  outline:none;
}
  
#sortlist:focus {
  box-shadow: 0px 0px 2px 4px rgba(100, 160, 220, 0.0);
  border:none;
  outline:none;
}
  
option:hover {
  box-shadow: 0px 0px 4px 6px rgba(100, 160, 220, 0.6);
  background: rgba(20, 60, 240, 0.8);
  color:white;
}
  
option:active {
  box-shadow: 
  0px 0px 2px 2px rgba(100, 160, 220, 0.8),
  0px 0px 2px 2px rgba(230, 230, 240, 0.8) inset;
  transform: translateY(2px);
  scale: 0.98;
  border:none;
  outline:none;
}
  
.btnsub1 {
  position:relative;
  left:50%;
  /*top:20px;*/
  margin:200px auto auto -70px;
  display:block;
  z-index:2;
  }
  
  
#btnsub, #btn_div {
  left:50%;
  /*top:0px;*/
  margin:54px auto 0px -70px;
  z-index:2;
  position:fixed;
}
  
select, .form-group, .form-control {
  border:none;
  outline:none;
  }
  
select:focus, .form-group:focus, .form-control:focus {
  border:none;
  outline:none;
  }
  
#anime_box {
  z-index:1;
  background:#98bf21;
  height:200px;
  width:100px;
  position:absolute;
  display:none;
  left:50%;
  margin:-40px auto auto -50px;
}

#card_sort .invalid-feedback, #card_sort .valid-feedback {
  margin-top: -4px;
  margin-bottom: -10px;
}

#bs_input_sort > option:nth-child(n) {
 background: rgba(60, 160, 240, 0.4);
 box-shadow: 
 0px 0px 8px 14px rgba(220, 220, 230, 0.6) inset,
 0px 0px 2px 4px rgba(100, 160, 220, 0.6);
 min-width: 400px;
}

.valid-feed {
  content:"valid feedback";
color: green;

}
</style>
<script>
  $(document).ready(function(){
    $("#button").click(function(){
    $("#sort_back1").toggleClass('sortback1');
     $(".btn.btn_sort").fadeToggle(500);
 // $(".btn_sort").animate({opacity: 'toggle'},500);
  $(".span2").toggleClass('span20').css({"transition": "0.4s"});
      //$("#select").slideToggle(1000);
      $("#bs_input_sort").slideToggle(1000);
    });
  
   $("option").click(function(){
   //$("#my_modal").hide();
   $(".span2").toggleClass('span20').css({"transition": "0.4s"});
   $("#span1").text($(this).text());
      //$("#select").slideUp(1000); 
      $("#bs_input_sort").slideUp(1000);
      $(".btn.btn_sort").delay(500).fadeIn(1000);
   }); 
  
   $("#sort_back1").click(function(){
    //$("#sort_back1").toggleClass('sortback1');
   $("#span1").text("sort parameters - select one");
   $(".btn.btn_sort").delay(500).fadeIn(1000);
      //$("#select").slideUp(1000); 
      $("#bs_input_sort").slideUp(1000);
       $(".span2").toggleClass('span20');
      
  });
  
  $('body > *:not(#container_sort)').click(function(){
    //$("#sort_back").hide();
   $("#span1").text("sort parameters - select one");
   $(".btn.btn_sort").delay(500).fadeIn(1000);
      $("#bs_input_sort").slideUp(1000, function(){
        $(".span2").toggleClass('span20');
      }); 
    });
  });
  </script>
  <script>

    /*const collection = document.body.children;
    for (let i = 0; i < collection.length; i++) {
      collection[i].style.backgroundColor = "red";
    }*/

    function validateFormSort() {
      var sort_choice = document.forms["formsort_name"]['bs_input_sort'].value;
      if (sort_choice == "" || sort_choice == null || sort_choice == "sort parameters - select one") {
    //  if (sort_choice == "non-choice") {
        alert("THIS IS NOT CORRECT VALUE" + sort_choice);
        return false;
      } else {
        alert("THIS  CORRECT VALUE" + sort_choice);
        document.querySelector("#sortform > div > div").classList.toggle("valid-feed");
    //alert("OK YOU CHOOSE OPTION WITH VALUE: " + x + 'form is submitted ;)');
   }
    }
  </script>


    <div class="my_container_sort" id="container_sort" >
      <div class="my_card_sort" id="card_sort" >
        <div class="sortback" id="sort_back"></div>
   <div id="sort_back1" ></div>
{% if book_sort %}
  <div class="class_select" id="button"><span class="span2" id="span2a">▼</span><span id="span1" > sort parameters - select one </span><span class="span2" id="span2b">▲</span></div>

<!--<div id="select" name="select_name" class="class_select">-->

        <form action="/booksmartapp/booksmart-app/allrecords/" method="get" target="_blank" id="sortform" name="formsort_name" onfocus="return focusFormSort()"  onsubmit="return validateFormSort()">
          {% bootstrap_form book_sort %}
          <p id="focus_validate"> </p>
        </form>
   <div id="div_btn" >
         <button form="sortform" type="submit" class="btn btn_sort btn-outline-primary text-danger" style="min-width:150px;  border: 6px solid; box-shadow: 0px 0px 4px 6px rgba(100, 160, 220, 0.6); font-size: 22px; font-weight: bold; text-align:center; text-justify:center; padding-top:0px; padding-bottom:2px; margin-top:6px;" >sort books</button> 
      </div>           
     </div>           
{% endif %} 
    </div>

   
      <script>
        const select_view = document.getElementById("span1");
        const select_input = document.getElementById("bs_input_sort");
        const select_value = document.getElementById("bs_input_sort").value;
        const in_to_valid = document.querySelector("#sortform > div > div");
        const collection = select_input.children;
    
    select_view.addEventListener("change", selectDefault);
    function selectDefault() {
      if (select_view.textContent == "sort parameters - select one") {
        // select_input.children.selected = "false";
        
        for (let i = 0; i < collection.length; i++) {
          collection[i].selected = "false";
        }
      } else {

        in_to_valid.classList.toggle("valid-feed");
        in_to_valid.innerText = "sort option valid"
      }
    }


      const field_select = document.getElementById("span1");
      function focusFormSort() {
        var sort_choice = document.forms["formsort_name"]['bs_input_sort'].value;
        if (sort_choice != "" || sort_choice == null) {
      //  if (sort_choice == "non-choice") {
          document.getElementById("focus_validate").innerText = 'focus validated complete';
          return true;
        } //else {
      //alert("OK YOU CHOOSE OPTION WITH VALUE: " + x + 'form is submitted ;)');
     // }
      }

      </script>
    <!--  <div id="div1"></div> -->
      <script>
      //function PassValFunc() {
        //var xx = document.getElementById("bs_input_sort").value;
        //document.getElementById("div1").innerHTML = xx;
      //}
      </script>
