{% load bootstrap4 %}


<style type="text/css">

  input,
  select,
  option {
  outline: none;
  border: none;
  background: transparent;
  overflow: hidden;
  }

  #sortform select {
    -webkit-appearance: none;  }
  
  #input_select::placeholder { 
    color: white;
    opacity: 0.9;
    font-variant: small-caps;
    font-weight: bold;
    font-size: 18px;
  }
  
  #input_select::-ms-input-placeholder { 
    color: white;
    opacity: 0.9;
    font-variant: small-caps;
    font-weight: bold;
    font-size: 18px;
  }
  
  
  .my_container_sort {
  position:relative;
  width:560px; 
  margin: 60px auto 0px auto;
  max-width: 90%;
  z-index: 26;
  left: 12px;
  -webkit-backdrop-filter: blur(2px);
  backdrop-filter: blur(2px);
  background-color: rgba(100, 160, 220, 0.2);
  padding: 10px;
  transition: 0.6s;
  border-radius: 4px;
  border: 6px solid rgba(100, 160, 220, 0.4);
  box-shadow: 
  0px 2px 2px 0px rgba(110, 170, 230, 0.4), 
  0px 3px 3px 0px rgba(100, 160, 220, 0.6), 
  0px 5px 4px 0px rgba(90, 150, 210, 0.4), 
  0px 6px 5px 0px rgba(80, 140, 200, 0.6), 
  -2px 8px 6px 0px rgba(119, 120, 123, 0.4), 
  2px 9px 7px 0px rgba(119, 120, 123, 0.4), 
  0px 10px 8px 0px rgba(77, 77, 79, 0.4), 
  0px 11px 9px 0px rgba(43, 53, 63, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  }
  
  .my_container_sort:hover {
  transform: scale(1);
  backdrop-filter: none;
  background-color: rgb(100, 160, 220,); 
  background-color: rgba(100, 160, 220, 0.6); 
  box-shadow: 
  1px 2px 2px 0px rgba(110, 170, 230, 0.4), 
  -1px 3px 3px 0px rgba(100, 160, 220, 0.6), 
  0px 5px 4px 0px rgba(90, 150, 210, 0.4), 
  0px 6px 5px 0px rgba(80, 140, 200, 0.6), 
  0px 2px 5px 9px rgba(229, 230, 243, 0.4);
  }
  
  .my_card_sort {
  background-color: rgb(100, 160, 220,); 
  background-color: rgba(100, 160, 220, 0.4); 
  font-size: 18px;
  color: white;
  font-weight: bold;
  padding: 10px 30px 6px 30px;
  text-align: center;
  transition: 0.4s;
  justify-content:center;
  margin:auto;
  position:relative;
  z-index: 27;
  height: 146px;
  min-width: 100%;
  max-width: 100%;
  width: 100%;
  align-items: center;
  justify-content: center;
  }
  
  .my_card_sort:hover {
  background-color: rgb(100, 160, 220,); 
  background-color: rgba(100, 160, 220, 0.6); 
  } 
  
  
  .bs_input_sort {
  overflow: auto;
  }
  
  .bs_input_sort select::-webkit-scrollbar {
  /*display: none;*/
  width: 16px;
  }  
  
  .bs_input_sort select::-webkit-scrollbar {
  width: 16px;
  box-shadow: 0px 0px 5px 5px rgba(100, 160, 220, 0.1) inset; 
  }
  
  .bs_input_sort select::-webkit-scrollbar-track {
  box-shadow: 0px 0px 5px 5px rgba(100, 160, 220, 0.0) inset; 
  border-radius: 4px;
  margin-bottom:4px;
  }  
  
  .bs_input_sort select::-webkit-scrollbar-track:hover {
  box-shadow: 0px 0px 5px 5px rgba(100, 160, 220, 0.2) inset; 
  }
  
  .bs_input_sort select::-webkit-scrollbar-track:active,
  {
  box-shadow: 0px 0px 5px 5px rgba(100, 160, 220, 0.3) inset; 
  }
  
  .bs_input_sort select::-webkit-scrollbar-track:focus {
  box-shadow: 0px 0px 5px 5px rgba(100, 160, 220, 0.4) inset; 
  }
  
  .bs_input_sort select::-webkit-scrollbar-thumb {
  background: rgba(100, 160, 220, 0.1); 
  }
  
  .bs_input_sort select::-webkit-scrollbar-thumb:hover {
  background: rgba(100, 160, 220, 0.4); 
  }
  
  .bs_input_sort select::-webkit-scrollbar-thumb:active {
  background: rgba(100, 160, 220,, 0.6); 
  }
  
  .bs_input_sort select::-webkit-scrollbar-thumb:focus {
  background: rgba(100, 160, 220, 0.8); 
  }
  
  #span1 {
  background-color: rgba(240, 230, 220, 0.0);
  }
  
  #span2a {
  display:inline-block;
  margin-right: -30px;
  position:relative;
  z-index: 28;
  }
  
  #span2b {
  display:inline-block;
  margin-left: -30px;
  position:relative;
  z-index: 28;       
  }
  
  .span2 {
  color:rgba(0, 102, 255, 0.2);
  text-shadow: 
  -1px 0 rgba(0, 102, 255, 0.8),
  1px 1px rgba(255, 255, 255, 0.9),
  -1px -1px rgba(255, 255, 255, 0.9),
  -1px 1px rgba(255, 255, 255, 0.9),
  2px 1px 1px rgba(0, 102, 255, 0.9),
  0px -1px 1px rgba(0, 102, 255, 0.9);
  rotate: 0deg;
  transition: rotate 0.8s;
  }
  
  .span20 {
  rotate:180deg;
  transition: rotate 0.8s;
  /*animation:mymove 0.2s;*/
  /*transform: rotate(180deg);*/
  }
  
  @keyframes btnmove {
  from {margin-top:50px;}
  to {margin-top:200px;}
  }
  
  .btn_margin {
  transition-duration: 1s;
  margin-top:200px;
  }
  
  #input_select {
  box-shadow: 
  0px 0px 0px 2px rgba(10, 115, 230, 0.6) inset, 
  0px 0px 0px 2px rgba(220, 220, 240, 0.4);
  background-color: rgba(230, 230, 240, 0.4);
  outline:none;
  z-index: 27;
  position:relative;
  border-radius: 2px;
  display:inline-block;
  min-width: 90%;
  width: 90%;
  max-width: 96%;
  margin: 30px auto 10px auto;
  color:blue;
  height: 37px;
  font-size: 18px;
  font-weight: bold;
  transition:0.2s;
  text-align:center;
  cursor:pointer;
  }
  
  #input_select:hover {
  box-shadow: 0px 0px 4px 6px rgba(0, 102, 255, 0.6);
  background-color: rgba(230, 230, 240, 0.6);
  }
  
  #span1:focus {
  font-weight:bold;
  }
  
  #input_select:active {
  box-shadow: 0px 0px 2px 4px rgba(0, 102, 255, 0.8);
  background-color: rgba(230, 230, 240, 0.8);
  transform: translateY(2px);
  scale: 0.98;
  }
  
  .opacity {
  opacity:0;
  transition-duration:0.5s;}
  
  #sortform {
  
  min-width:100%;
  max-width:100%;
  width:100%;
  position:relative;
  margin-left: auto;
  margin-right: auto;
  padding: 0px 4px 0px 4px;
  margin-top: -20px;
  align-items: center;
  justify-content: center;
  min-height: 20px;
  max-height: 20px;
  height: 20px;
  
  }
  
  #input_choice_sorting {
  background-color: rgba(220, 230, 240, 0.0);
  border-radius: 2px;
  min-width:90%;
  max-width:90%;
  width:90%;
  
  /*left:50%; 
  margin-left: -200px; */
  padding: 0px 0px 0px 10px; 
  box-shadow: 0px 0px 4px 4px rgba(100, 160, 220, 0.0);  
  font-size: 18px;
  font-weight: bold;
  overflow: hidden;
  color: blue;
  text-align:center;
  border:none;
  outline:none;
  z-index:28;
  display: none;
  justify-content: center;
   position: relative;
   margin: auto;
   transform-origin: top;
  left: 16px;
  min-height: 362px;
  height: 362px;

  }
  
  #input_choice_sorting:hover {
  border:none;
  outline:none;
  }
  
  #input_choice_sorting:active {
  border:none;
  outline:none;
  }
  
  #bs_input_sort:focus {
  border:none;
  outline:none;
  }
  
  #sortform > div {
    padding: 0px; 
    margin: auto; }
  
  #input_choice_sorting option {
  text-align:center;
  border-radius: 4px;
  z-index: 29;
  color:blue;
  border:none;
  outline:none;
  background-color: rgba(230, 230, 240, 0.8);
  box-shadow: 0px 0px 2px 4px rgba(100, 160, 220, 0.6); 
  padding:6px 4px 6px 4px;
  font-size:18px;
  min-width:98%;
  max-width:98%;
  width:98%;
  
  margin-bottom: 6px;
  display: block;
  transition: 0.2s;
  cursor:pointer;
  font-variant: small-caps;
  position: relative;
  }
  
  #btnsort {
  border: 6px solid rgba(0, 0, 210, 0.6);
  box-shadow: 0px 0px 4px 6px rgba(100, 160, 220, 0.6); 
  font-size: 22px; 
  font-weight: bold; 
  text-align: center; 
  text-justify: center; 
  padding-top: 0px; 
  padding-bottom:2px; 
  margin-top:82px;
  min-width: 146px;
  height: 46px; 
  background: rgba(60, 160, 240, 0.6);
  font-variant: small-caps;
  position:relative; 
  z-index: 23; 
  color: rgba(0, 0, 210, 0.8);
  border-radius: 2px;

  }
  
  #btnsort:hover {
  border: 6px solid rgba(210, 0, 0, 0.9);
  color: rgba(210, 0, 0, 0.9);
  background: rgba(60, 160, 240, 0.6);
  box-shadow: 0px 0px 2px 6px rgba(220, 230, 240, 0.6);
  }
  
  #btnsort:active {
    border: 6px solid rgba(0, 0, 210, 0.8);
    color: rgba(210, 0, 0, 0.9);
    background: rgba(60, 160, 240, 0.6);
    box-shadow: 0px 0px 2px 4px rgba(220, 230, 240, 0.6);
    transform: matrix(0.98, 0, 0, 0.98, 0, 2)
    }
  
  #sortlist:active {
  border:none;
  outline:none;
  }
  
  #sortlist:focus {
  box-shadow: 0px 0px 2px 4px rgba(100, 160, 220, 0.0);
  border:none;
  outline:none;
  }
  
  #input_choice_sorting option:hover {
  box-shadow: 0px 0px 4px 4px rgba(100, 160, 220, 0.6);
  background: rgba(20, 60, 240, 0.8);
  color: rgba(230, 230, 240, 0.8);
  font-weight: bold;
  }
  
  #input_choice_sorting option:focus {
  box-shadow: 0px 0px 2px 4px rgba(100, 160, 220, 0.8);
  background: rgba(20, 60, 240, 0.8);
  color: rgba(230, 230, 240, 0.8);
  font-weight: bold;
  }
  
  /* select:focus option:checked, */
  #input_choice_sorting option:checked,
  #input_choice_sorting option:checked:hover,
  #input_choice_sorting option:checked:focus,
  #input_choice_sorting option:checked:active {
    box-shadow: 0px 0px 4px 6px rgba(100, 160, 220, 0.6);
  background: rgba(20, 60, 240, 0.6);
  color: rgba(230, 230, 240, 0.8);
  }
  
  /* select:-internal-list-box option:checked:hover */
  
  
  
  #input_choice_sorting option:default,
  #input_choice_sorting option:default:hover,
  #input_choice_sorting option:default:focus,
  #input_choice_sorting option:default:active {
    box-shadow: 0px 0px 4px 6px rgba(100, 160, 220, 0.6);
  background: rgba(20, 60, 240, 0.6);
  color: rgba(230, 230, 240, 0.8);
  }
  
  #input_choice_sorting option:active {
  box-shadow: 
  0px 0px 2px 2px rgba(100, 160, 220, 0.8),
  0px 0px 2px 2px rgba(230, 230, 240, 0.8) inset;
  transform: translateY(2px);
  scale: 0.98;
  border:none;
  outline:none;
  }
  
  select, .form-group, .form-control {
  border:none;
  outline:none;
  }
  
  select:focus, .form-group:focus, .form-control:focus {
  border:none;
  outline:none;
  }
  
    @keyframes roll_open {
      from {transform: scaleY(0);}
      to {transform: scaleY(1)}
    }
    
      @keyframes roll_close {
   from {transform: scaleY(1);}
      to {transform: scaleY(0)}
    }
  /*  @keyframes roll_close {
      from {height: 100%;}
      to {height: 0px;}
    } */
    
    @keyframes opacity_up {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    
    @keyframes opacity_down {
      from {opacity: 1;}
      to {opacity: 0;}
    }
    
#search_card_gb select:focus option:not(option:first-child):checked,
#search_card_gb select:focus option:not(option:first-of-type):checked{   
          -webkit-text-fill-color: gold;
            background-color: #ff000080 !important;
          background-image: radial-gradient(rgba(255, 255, 0, 0.2), rgba(255, 255, 0, 0.2), rgba(255, 255, 0, 0.2));
          color: darkblue;
      }
         
#search_card_gb select:focus option:first-child:hover,   	
#search_card_gb select:focus option:first-child:checked,
#search_card_gb select:focus option:first-child:checked:hover,
#search_card_gb select:focus option:first-of-type,
#search_card_gb select:focus option:first-of-type:hover {
      -webkit-text-fill-color: gold;
    background-color: #ff000080 !important;
      background-image: radial-gradient(rgba(255, 255, 0, 0.2), rgba(255, 255, 0, 0.2), rgba(255, 255, 0, 0.2));
      color: rgba(230, 230, 240, 0.9);
  }

@media screen and (max-width: 830px) {
#input_choice_sorting {
    position: fixed;
    min-width: 350px;
    width: 350px;
    max-width: 350px;
    top: 66px;
    z-index: 40;
    left: 50%;
    margin-left: -158px;
    /*border: 2px solid blue; */
}
}
            
    @media screen and (max-width: 640px) {
    .my_container_sort {
    min-width: 92%;
    max-width: 92%;
    width: 92%;
  /*  padding: 10px; */}
    }
  
    @media screen and (max-width: 580px) {
    .my_container_sort {
    min-width: 94%; 
    max-width: 94%; 
    width: 94%; 
    }
    
    #input_choice_sorting {
      position: fixed;
      min-width: 300px;
      width: 300px;
      max-width: 300px;
      top: 66px;
      z-index: 40;
      left: 50%;
      margin-left: -158px;
   /*   border: 2px solid blue; */
  }
  }

  @media screen and (max-width: 480px) {

    .my_container_sort {
    left: 0px;
    min-width: 98%;
    max-width: 98%;
    width: 98%; 
    }

    #input_field {
      width: 100%;
    }
  }
  
    </style>
  
  <div class="my_container_sort" id="mycontainer_sort">
      <div class="my_card_sort" id="mycard_sort">
           <form action="/booksmartapp/booksmart-app/allrecords/" method="get" target="_blank" id="sortform" name="formsort_name" onsubmit="return validateFormSort()"  >  
      <div id="input_field">
  <div class="span2" id="span2a">▼</div>
  <!-- <input id="input_select" type="text" value="select sort option" class="my_select"  placeholder="select sort option" readonly> -->
  <input id="input_select" type="text" value="" class="my_select" placeholder="select sort option" readonly> 
  <div class="span2" id="span2b">▲</div>
  
  </div>
  {% if book_sort %} 
          {% bootstrap_form book_sort %}
          <p id="focus_validate"> </p>
        </form>
        <button form="sortform" type="submit" id="btnsort" class="btn_sort" >sort books</button>  
        {% endif %} 
      </div>           
     </div>           

   <!-- </div> -->
   {% include "snippets/modal_message_part.html" %}
    <script>

      /*const collection = document.body.children;
      for (let i = 0; i < collection.length; i++) {
        collection[i].style.backgroundColor = "red";
      }*/
  //document.querySelector("#input_select")
      function validateFormSort() {
        //var sort_input_select = document.getElementById("input_select").value;
        // var sort_choice = document.forms["formsort_name"]['input_choice_sorting'].value;
        // var sort_choice_text = document.forms["formsort_name"]['input_choice_sorting'].innerText;
        let sort_choice_value = document.forms["formsort_name"]['input_choice_sorting'].value;
        let sort_choice_value_input = document.getElementById("input_select").value;
      //  if (sort_choice_value_input == "") {
        if (sort_choice_value == "") {
          alert('"select sort option"\nIS NOT CORRECT CHOICE');
          var mymodal_main = document.getElementById("mymodal_messages_main_part");
          var mymodal_cont_main = document.getElementById("modal_cont_messages_main_part");
      
            mymodal_main.style.display = "block";
            mymodal_main.style.animation = "modalfadein 1s 1";
            document.getElementById("information_message").innerHTML = '<p style="animation: anime_red_text 2s infinite; font-size: 22px; font-wight: bold;">"select sort option" <br> THIS IS NOT CORRECT VALUE';
            // mymodal_main.src = this.src;
            mymodal_cont_main.style.display = "block"; 
            // mymodal_cont_main.style.animation = "zoom 2s 1 ease-in"; 
            mymodal_cont_main.style.animation = "slideDown 2s 1 ease-in-out";
            // mymodal_cont_main.src = this.src;
            var span1_booksmart = document.getElementById("close_m_part_id");
            var span2_booksmart = document.getElementById("myBtn_messages_part_id");
            
            span1_booksmart.onclick = function() {
              mymodal_cont_main.style.animation = "unzoom 2s 1";
              mymodal_main.style.animation = "modalfadeout 1s 1 1s";
              setTimeout(()=> {
                mymodal_cont_main.style.display = "none";
                mymodal_main.style.display = "none"
                  }
                  , 1900)}        
            
            span2_booksmart.onclick = function() {
              mymodal_cont_main.style.animation = "animatetopback 2s 1";
              mymodal_main.style.animation = "modalfadeout 1s 1 1s";
              setTimeout(()=> {
                mymodal_cont_main.style.display = "none";
                mymodal_main.style.display = "none"
                  }
                  , 1900);}
        
                mymodal_main.onclick = function() {
                mymodal_cont_main.style.animation = "unzoomrotate 2s 1";
                mymodal_main.style.animation = "modalfadeout 1s 1 1s";
                setTimeout(()=> {
                mymodal_cont_main.style.display = "none";
                mymodal_main.style.display = "none"
                  }, 1900);} 
          
          return false
        }
      /*  if ( sort_choice_text == "" || sort_choice_text == null || sort_choice_value == "" || sort_input_select == "") {
      //  if (sort_choice == "non-choice") {
          alert("EMPTY CHOICE IS NOT CORRECT CHOICE\nsort_input_select:" + sort_input_select) {
          // document.getElementById("information_message").innerText = "THIS IS NOT CORRECT VALUE";
          // var outside_modal = "booksmartapp\templates\snippets\modal_message.html";
          // outside_modal.open;
        return false
          
        } else if (sort_choice_text == 'select sort option' || sort_input_select == ' select sort option') {
          alert('THIS IS NOT CORRECT VALUE:\n"select sort option"\nsort_input_select: ' + sort_input_select);
          return false
      //alert("OK YOU CHOOSE OPTION WITH VALUE: " + x + 'form is submitted ;)');
     } else {
      document.querySelector("#sortform > div > div").classList.toggle("valid-feed");
     }
      } */
      }
    </script>
   
    <script>
      var span_2a = document.getElementById("span2a");
      var span_2b = document.getElementById("span2b");
      var dropdown_options = document.getElementById("input_choice_sorting");
      var select_input = document.getElementById("input_select");
      var cont_sort = document.getElementById("mycard_sort");
         
      if (
        navigator.userAgent.match(/Android/i) ||
        navigator.userAgent.match(/iPhone/i)
      ) {
      dropdown_options.style.minHeight = "30px";
      dropdown_options.style.maxHeight = "30px";
      dropdown_options.style.height = "30px";
      dropdown_options.style.marginTop = "-32px";
      dropdown_options.style.marginLeft= "-38%";
      dropdown_options.style.color = "transparent";
      dropdown_options.style.minWidth = "78%"; 
      dropdown_options.style.maxWidth = "78%"; 
      dropdown_options.style.width = "78%"; 
      // dropdown_options.style.border = ""
      dropdown_options.style.display = "block";
       dropdown_options.size = 1; 
      
      /*dropdown_options.onchange = function() {
       select_input.value = dropdown_options.value;
      } */
       dropdown_options.onclick = function() {
       span_2a.classList.toggle("span20");
       span_2b.classList.toggle("span20");
      var x = dropdown_options.selectedIndex;
      var y = dropdown_options.options;
       select_input.value = y[x].text
      }
      dropdown_options.onblur = function() {
       span_2a.classList.toggle("span20");
       span_2b.classList.toggle("span20");
      }
       }
       
      // else if (document.body.clientWidth > 800) {
          else {
            select_input.onclick = function() {
            if (dropdown_options.style.display === "block" ) {
            span_2a.classList.toggle("span20");
            span_2b.classList.toggle("span20");
            dropdown_options.setAttribute("size", 11); 
            dropdown_options.style.animation = "roll_close 1.4s";
            setTimeout(function(){
            dropdown_options.style.display = "none";},
            1200);
            } else {
            span_2a.classList.toggle("span20");
            span_2b.classList.toggle("span20");
             dropdown_options.style.animation = "roll_open 1.4s";
            dropdown_options.style.display = "block";
            }
            }
            
            
            const nodeList_1 = document.getElementsByTagName('option');
            for (let i = 0; i < nodeList_1.length; i++) {
             nodeList_1[i].onclick = function() {
              span_2a.classList.toggle("span20");
              span_2b.classList.toggle("span20");
            select_input.value = nodeList_1[i].textContent;
            dropdown_options.style.animation = "roll_close 1.4s";
                setTimeout(function(){
            dropdown_options.style.display = "none";},
            1200);
            }
            }
            
            document.addEventListener("click", function(event) {
              // If user clicks inside the element, do nothing
              if (event.target.closest(".my_select")) return;
              // If user clicks outside the element, hide it!
              span_2a.classList.toggle("span20");
              span_2b.classList.toggle("span20");
              dropdown_options.style.animation = "opacity_down 1.2s";
                setTimeout(function(){
            dropdown_options.style.display = "none";},
            1000);
            })
           
      } 
      
      /*if (/Android|iPhone/i.test(navigator.userAgent)) {
        // This checks if the current device is in fact mobile
      }
      
      // an alternative structure to check individual matches
      if (
        navigator.userAgent.match(/Android/i) ||
        navigator.userAgent.match(/iPhone/i)
      ) {
        // making individual checks
      } */
            </script>
      